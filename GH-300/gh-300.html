<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GitHub Copilot Ethics, Features, and Usage Quiz</title>
    
    <!-- Load Tailwind CSS via CDN for modern styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Use Inter font family -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
        /* Changed from min-height: 100vh to ensure the app wrapper covers the viewport */
        .container {
            min-height: 100vh;
        }
        .option-button {
            transition: all 0.2s;
            cursor: pointer;
            text-align: left;
            user-select: none; /* Prevents text selection on rapid clicks */
        }
        .option-button:hover:not(.selected):not(.correct):not(.incorrect) {
            background-color: #e5e7eb;
        }
        
        /* User Selection Styles */
        .selected {
            border-left: 4px solid #3b82f6;
            background-color: #dbeafe;
        }
        
        /* Correct Answer Styles */
        .correct {
            border: 2px solid #10b981;
            background-color: #d1fae5;
        }
        /* Incorrect Answer Styles (only if user selected it and it was wrong) */
        .incorrect {
            border: 2px solid #ef4444;
            background-color: #fee2e2;
        }

        /* Explanation box style */
        .explanation {
            border-left: 4px solid #f97316;
            background-color: #fff7ed;
        }

        /* Custom print styling */
        @media print {
            body * {
                visibility: hidden;
            }
            #summary-modal, #summary-modal * {
                visibility: visible;
            }
            #summary-modal {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                margin: 0;
                padding: 0;
                background: white;
            }
            .no-print {
                display: none !important;
            }
            .shadow-2xl, .shadow-3xl, .p-10, .m-4 {
                box-shadow: none !important;
                padding: 0 !important;
                margin: 0 !important;
            }
            .rounded-xl {
                border-radius: 0 !important;
            }
            .prose {
                max-width: 100%;
            }
        }
    </style>
</head>
<body class="p-4">

    <!-- Changed `items-center` to `items-start` for vertical top alignment -->
    <div id="app" class="container flex items-start justify-center p-4">
        <div id="loading" class="text-gray-600">Initializing quiz...</div>

        <!-- Main Quiz Card -->
        <div id="quiz-container" class="w-full max-w-3xl bg-white shadow-2xl rounded-xl p-6 md:p-10 hidden mt-10">
            <h2 id="quiz-title" class="text-3xl font-extrabold text-gray-800 mb-4 border-b pb-2"></h2>

            <!-- Quiz Status -->
            <div id="quiz-status" class="flex justify-between items-center text-sm font-medium text-gray-500 mb-6">
                <span id="question-counter"></span>
                <span id="score-info"></span> 
            </div>

            <!-- Question Display -->
            <div id="question-display">
                <p id="question-text" class="text-xl font-semibold text-gray-900 mb-2"></p>
                <p id="selection-hint" class="text-sm text-gray-600 mb-6 font-medium italic"></p>

                <div id="options-container" class="space-y-4">
                    <!-- Options will be injected here -->
                </div>
            </div>

            <!-- Correct Answer Explanation -->
            <div id="explanation-box" class="explanation mt-6 p-4 rounded-lg text-gray-800 text-sm hidden">
                <p class="font-bold text-orange-700 mb-1">Explanation:</p>
                <p id="explanation-text"></p>
            </div>


            <!-- Navigation & Action Buttons -->
            <div class="mt-8 pt-6 border-t flex flex-col sm:flex-row justify-between items-center space-y-4 sm:space-y-0">
                <button id="show-correct-btn" onclick="toggleCorrectAnswer()" class="w-full sm:w-auto px-4 py-2 text-sm font-medium text-blue-700 bg-blue-100 rounded-lg hover:bg-blue-200 transition-colors">
                    Show Correct Answer
                </button>
                <div class="flex space-x-3">
                    <button id="prev-btn" onclick="handleNavigation(-1)" disabled class="px-6 py-3 text-lg font-semibold rounded-lg bg-gray-200 text-gray-600 transition-all hover:bg-gray-300 disabled:opacity-50">
                        Previous
                    </button>
                    <button id="next-btn" onclick="handleNavigation(1)" class="px-6 py-3 text-lg font-semibold rounded-lg text-white bg-blue-600 hover:bg-blue-700 transition-all shadow-md">
                        Next
                    </button>
                </div>
            </div>
        </div>

        <!-- Results Card -->
        <div id="results-container" class="w-full max-w-3xl bg-white shadow-2xl rounded-xl p-6 md:p-10 hidden mt-10">
            <h2 class="text-3xl font-extrabold text-gray-800 mb-4">Quiz Results</h2>
            <div class="space-y-4 mb-8">
                <p class="text-xl">Your Final Score: <span id="final-score" class="font-bold"></span> / <span id="results-total-score"></span></p>
                <p class="text-xl">Status: <span id="pass-fail-status" class="font-bold px-3 py-1 rounded-full inline-block"></span></p>
            </div>
            
            <div class="flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-4">
                <button onclick="renderAndShowSummary(true)" class="flex-1 px-6 py-3 text-lg font-semibold rounded-lg text-white bg-green-600 hover:bg-green-700 transition-all shadow-md">
                    Review & Print Summary
                </button>
                <button onclick="window.location.reload()" class="flex-1 px-6 py-3 text-lg font-semibold rounded-lg bg-gray-200 text-gray-800 hover:bg-gray-300 transition-colors">
                    Start New Quiz
                </button>
            </div>
        </div>
    </div>

    <!-- Printable Summary Section (Modal) -->
    <div id="summary-modal" class="fixed inset-0 bg-gray-900 bg-opacity-75 z-50 flex justify-center items-start overflow-y-auto pt-10 hidden">
        <div class="bg-white rounded-xl shadow-3xl w-full max-w-4xl m-4 p-8">
            <div id="printSummary" class="prose max-w-none">
                <!-- Summary content injected here -->
            </div>
            <div class="no-print mt-6 flex justify-end space-x-3">
                <button onclick="document.getElementById('summary-modal').classList.add('hidden')" class="px-6 py-3 text-lg font-semibold rounded-lg bg-gray-200 text-gray-800 hover:bg-gray-300 transition-colors">
                    Close Review
                </button>
                <button onclick="window.print()" class="px-6 py-3 text-lg font-semibold rounded-lg text-white bg-blue-600 hover:bg-blue-700 transition-all shadow-md">
                    Print Quiz Summary
                </button>
            </div>
        </div>
    </div>


    <script>
        // 1. EMBEDDED QUIZ DATA: Using the provided JSON format.
        const RAW_QUIZ_DATA = {
            "quizName": "GH-300 : GitHub Copilot (Practice Test)",
            "totalScore": 1000,
            "passingScore": 700,
            "questions": [
                {
                    "id": 1,
                    "Question": "Which Microsoft ethical AI principle is aimed at ensuring AI systems treat all people equally?",
                    "Options": [
                        {"id": 1, "text": "A. Accountability"},
                        {"id": 2, "text": "B. Fairness"},
                        {"id": 3, "text": "C. Transparency"},
                        {"id": 4, "text": "D. Reliability"}
                    ],
                    "MaxAnswerSelection": 1,
                    "CorrectAnswers": [2],
                    "CorrectAnswerExplanation": "The principle of **Fairness** is specifically concerned with ensuring that AI systems do not perpetuate or amplify bias and treat all individuals and groups equitably. The other principles address responsibility, clarity of operation, and consistent performance."
                },
                {
                    "id": 2,
                    "Question": "What can be done during AI development to minimize bias?",
                    "Options": [
                        {"id": 1, "text": "A. Rely solely on a single large-scale dataset."},
                        {"id": 2, "text": "B. Exclude all human oversight to ensure pure AI decision-making."},
                        {"id": 3, "text": "C. Use diverse data, fairness metrics, and human oversight."},
                        {"id": 4, "text": "D. Train the AI model exclusively on data from one demographic group."}
                    ],
                    "MaxAnswerSelection": 1,
                    "CorrectAnswers": [3],
                    "CorrectAnswerExplanation": "Minimizing bias requires a multi-pronged approach: **diverse data** prevents skewed learning, **fairness metrics** actively measure and flag disparities, and **human oversight** provides critical review and context."
                },
                {
                    "id": 3,
                    "Question": "Why is it important to ensure the security of the code used in generative AI general AI tools?",
                    "Options": [
                        {"id": 1, "text": "A. Ensuring code security prevents unauthorized access and potential data breaches."},
                        {"id": 2, "text": "B. Secure code makes the AI run faster."},
                        {"id": 3, "text": "C. It is only important for non-generative AI tools."},
                        {"id": 4, "text": "D. Secure code ensures the AI can never produce incorrect suggestions."}
                    ],
                    "MaxAnswerSelection": 1,
                    "CorrectAnswers": [1],
                    "CorrectAnswerExplanation": "The core function of securing any system's underlying code is to protect it from malicious threats. For AI tools, this is crucial to prevent **unauthorized access**, manipulation, and the resultant **data breaches** or service disruption."
                },
                {
                    "id": 4,
                    "Question": "A social media manager wants to use AI to filter content. How can they promote transparency in the platform's AI operations?",
                    "Options": [
                        {"id": 1, "text": "A. By providing clear explanations about the types of content the AI is designed to filter and how it arrives at its conclusion."},
                        {"id": 2, "text": "B. By keeping the AI's filtering logic a complete secret to prevent users from gaming the system."},
                        {"id": 3, "text": "C. By only using open-source AI models."},
                        {"id": 4, "text": "D. By having the AI filter content 24/7 without any human checks."}
                    ],
                    "MaxAnswerSelection": 1,
                    "CorrectAnswers": [1],
                    "CorrectAnswerExplanation": "**Transparency** in AI means making the system's purpose and decision-making process understandable to users. Providing clear explanations about what is filtered and the criteria used is the primary way to achieve this."
                },
                {
                    "id": 5,
                    "Question": "What is the primary role of the `/optimize` command in Visual Studio?",
                    "Options": [
                        {"id": 1, "text": "A. Rewrites the code from one programming language to another."},
                        {"id": 2, "text": "B. Generates a list of all possible security vulnerabilities."},
                        {"id": 3, "text": "C. Converts all selected code into a single-line expression."},
                        {"id": 4, "text": "D. Enhances the performance of the selected code by analyzing its runtime complexity."}
                    ],
                    "MaxAnswerSelection": 1,
                    "CorrectAnswers": [4],
                    "CorrectAnswerExplanation": "The `/optimize` command in GitHub Copilot Chat (specifically in supported IDEs like Visual Studio) is designed to analyze and **enhance the performance** of selected code, often by suggesting more efficient structures or algorithms."
                },
                {
                    "id": 6,
                    "Question": "Which GitHub Copilot plan could an Azure DevOps organization use without requiring a GitHub Enterprise license?",
                    "Options": [
                        {"id": 1, "text": "A. GitHub Copilot Enterprise"},
                        {"id": 2, "text": "B. GitHub Copilot for Azure DevOps."},
                        {"id": 3, "text": "C. GitHub Copilot Pro"},
                        {"id": 4, "text": "D. GitHub Copilot Pro+"}
                    ],
                    "MaxAnswerSelection": 1,
                    "CorrectAnswers": [2],
                    "CorrectAnswerExplanation": "**GitHub Copilot for Azure DevOps** is a specific plan designed to bring Copilot capabilities into the Azure DevOps environment, making it the appropriate choice for organizations operating outside of GitHub Enterprise."
                },
                {
                    "id": 7,
                    "Question": "Which of the following steps correctly demonstrates how to establish an organization-wide policy for GitHub Copilot Business to restrict its use to certain repositories?",
                    "Options": [
                        {"id": 1, "text": "A. Edit the repository's `.github/copilot-config.json` file."},
                        {"id": 2, "text": "B. Modify each user's local IDE settings."},
                        {"id": 3, "text": "C. Configure the policies in the organization settings."},
                        {"id": 4, "text": "D. Send an email to all users with the policy details."}
                    ],
                    "MaxAnswerSelection": 1,
                    "CorrectAnswers": [3],
                    "CorrectAnswerExplanation": "Organization-wide configuration and restrictions for GitHub Copilot Business are centrally managed through the **organization settings** interface, allowing administrators to define policies that apply across all or specific repositories."
                },
                {
                    "id": 8,
                    "Question": "What type of information can you retrieve through GitHub Copilot Business subscriptions via REST API? (Choose two)",
                    "Options": [
                        {"id": 1, "text": "A. The specific code snippets generated for each user."},
                        {"id": 2, "text": "B. List all GitHub Copilot seat assignments for an organization."},
                        {"id": 3, "text": "C. Get a summary of GitHub Copilot usage for organization members."},
                        {"id": 4, "text": "D. Detailed billing statements for every accepted suggestion."}
                    ],
                    "MaxAnswerSelection": 2,
                    "CorrectAnswers": [2, 3],
                    "CorrectAnswerExplanation": "The GitHub Copilot Business API is primarily for administrative management and high-level reporting. It allows admins to manage user access, like **listing seat assignments**, and gain aggregate insights, such as **summaries of usage** for reporting and evaluation."
                },
                {
                    "id": 9,
                    "Question": "What is the best way to share feedback about GitHub Copilot Chat when using it on GitHub mobile?",
                    "Options": [
                        {"id": 1, "text": "A. Open a new issue on the GitHub CLI repository."},
                        {"id": 2, "text": "B. Email the GitHub support team with a screenshot."},
                        {"id": 3, "text": "C. Use the emojis in the Copilot Chat interface."},
                        {"id": 4, "text": "D. Use the `/feedback` command in the CLI."}
                    ],
                    "MaxAnswerSelection": 1,
                    "CorrectAnswers": [3],
                    "CorrectAnswerExplanation": "The most straightforward way to provide feedback in the GitHub mobile Copilot Chat interface is by using the integrated **emojis (thumbs-up or thumbs-down)**, which captures the context of the current conversation and suggestion."
                },
                {
                    "id": 10,
                    "Question": "What specific function does the `/fix` command perform?",
                    "Options": [
                        {"id": 1, "text": "A. Proposes changes for detected issues, suggesting corrections for syntax errors and programming mistakes."},
                        {"id": 2, "text": "B. Automatically runs the project's entire test suite."},
                        {"id": 3, "text": "C. Searches the web for external troubleshooting guides."},
                        {"id": 4, "text": "D. Rewrites the entire function in a different programming language."}
                    ],
                    "MaxAnswerSelection": 1,
                    "CorrectAnswers": [1],
                    "CorrectAnswerExplanation": "The `/fix` command in GitHub Copilot Chat is a powerful utility designed to analyze the currently selected code or error and **propose direct corrections** to resolve bugs, syntax errors, or logical programming issues."
                },
                {
                    "id": 11,
                    "Question": "Which GitHub Copilot pricing plans include features that exclude your GitHub Copilot data (like usage, prompts, and suggestions) from default training GitHub Copilot. (Choose two)",
                    "Options": [
                        {"id": 1, "text": "A. GitHub Copilot Free"},
                        {"id": 2, "text": "B. GitHub Copilot Business"},
                        {"id": 3, "text": "C. GitHub Copilot Pro"},
                        {"id": 4, "text": "D. GitHub Copilot Enterprise"}
                    ],
                    "MaxAnswerSelection": 2,
                    "CorrectAnswers": [2, 4],
                    "CorrectAnswerExplanation": "For security and privacy, both the **GitHub Copilot Business** and **GitHub Copilot Enterprise** plans guarantee that your prompts and suggestions are not used by default to train the underlying public GitHub Copilot model."
                },
                {
                    "id": 12,
                    "Question": "When using an IDE with a supported GitHub Copilot plug-in, which chat features can be accessed from within the IDE? (Choose two)",
                    "Options": [
                        {"id": 1, "text": "A. Explain code and suggest improvements."},
                        {"id": 2, "text": "B. Run a full CI/CD pipeline."},
                        {"id": 3, "text": "C. Generate unit tests."},
                        {"id": 4, "text": "D. Configure cloud environment settings."}
                    ],
                    "MaxAnswerSelection": 2,
                    "CorrectAnswers": [1, 3],
                    "CorrectAnswerExplanation": "The chat features in the IDE are designed to assist directly with code tasks. This includes capabilities like asking Copilot to **explain selected code** or helping to **generate relevant unit tests** for a function."
                },
                {
                    "id": 13,
                    "Question": "Which Copilot Enterprise features are available in all commercially supported IDEs?",
                    "Options": [
                        {"id": 1, "text": "A. Chat integration with organizational documents."},
                        {"id": 2, "text": "B. Custom models fine-tuned on your code."},
                        {"id": 3, "text": "C. Inline suggestions."},
                        {"id": 4, "text": "D. Centralized audit logs."}
                    ],
                    "MaxAnswerSelection": 1,
                    "CorrectAnswers": [3],
                    "CorrectAnswerExplanation": "The fundamental and universal feature across all commercially supported IDEs for GitHub Copilot is the **inline suggestion** functionality, which provides real-time code completions as the user types."
                },
                {
                    "id": 14,
                    "Question": "What two options navigate to configure duplicate detection? (Choose two)",
                    "Options": [
                        {"id": 1, "text": "A. Organization settings → Copilot → Policies."},
                        {"id": 2, "text": "B. Enterprise settings → Copilot → Policies."},
                        {"id": 3, "text": "C. Repository settings → Code & automation → Copilot."},
                        {"id": 4, "text": "D. User Profile settings → GitHub Copilot → Security."}
                    ],
                    "MaxAnswerSelection": 2,
                    "CorrectAnswers": [1, 2],
                    "CorrectAnswerExplanation": "Duplicate detection, which relates to potential public code matches, is an administrative policy setting. As such, it is configured at the highest organizational levels: either in the **Organization settings → Copilot → Policies** or the **Enterprise settings → Copilot → Policies**."
                },
                {
                    "id": 15,
                    "Question": "What kind of insights can the GitHub Copilot usage metrics API provide to help evaluate the effectiveness of GitHub Copilot? (Choose two)",
                    "Options": [
                        {"id": 1, "text": "A. Raw, unaggregated data of every user prompt."},
                        {"id": 2, "text": "B. The API can track the number of code suggestions accepted and used in the organization."},
                        {"id": 3, "text": "C. Screenshots of users' IDEs during coding sessions."},
                        {"id": 4, "text": "D. The API can provide Copilot Chat specific suggestions acceptance metrics."}
                    ],
                    "MaxAnswerSelection": 2,
                    "CorrectAnswers": [2, 4],
                    "CorrectAnswerExplanation": "The usage metrics API provides aggregated data on user interaction, which is key to measuring effectiveness. This includes tracking accepted **code suggestions** and specific acceptance metrics related to **Copilot Chat** interactions."
                },
                {
                    "id": 16,
                    "Question": "How do you generate code suggestions with GitHub Copilot in the CLI?",
                    "Options": [
                        {"id": 1, "text": "A. Type `/code` followed by your request in the CLI."},
                        {"id": 2, "text": "B. Use `gh copilot --generate` and then wait."},
                        {"id": 3, "text": "C. Run a shell script called `copilot-suggest.sh`."},
                        {"id": 4, "text": "D. Use `gh copilot suggest` → Write the command you want → Select the best suggestion from the list."}
                    ],
                    "MaxAnswerSelection": 1,
                    "CorrectAnswers": [4],
                    "CorrectAnswerExplanation": "The correct command for generating suggestions in the GitHub CLI is **`gh copilot suggest`**. This initiates the Copilot interaction, allowing the user to input their request and then choose from a list of generated suggestions."
                },
                {
                    "id": 17,
                    "Question": "Which of the following are true about code suggestions? (Choose two)",
                    "Options": [
                        {"id": 1, "text": "A. Code suggestions are only available in VS Code."},
                        {"id": 2, "text": "B. Suggestions can only be accepted one line at a time."},
                        {"id": 3, "text": "C. Copilot never generates alternative suggestions."},
                        {"id": 4, "text": "D. You can use keyboard shortcuts to accept the next word in a suggestion."},
                        {"id": 5, "text": "E. Alternative code suggestions can be shown in a new tab."}
                    ],
                    "MaxAnswerSelection": 2,
                    "CorrectAnswers": [4, 5],
                    "CorrectAnswerExplanation": "GitHub Copilot is highly flexible: it allows granular acceptance of suggestions (like accepting the **next word** via a shortcut) and provides a mechanism to cycle through or view **alternative suggestions** in a dedicated panel or tab."
                },
                {
                    "id": 18,
                    "Question": "What reasons could apply if code suggestions are not working in your editor? (Choose three)",
                    "Options": [
                        {"id": 1, "text": "A. You do not have an active internet connection."},
                        {"id": 2, "text": "B. Your programming language is not supported."},
                        {"id": 3, "text": "C. You are using an outdated version of GitHub Desktop."},
                        {"id": 4, "text": "D. You do not have a valid GitHub Copilot license."},
                        {"id": 5, "text": "E. Your computer's internal clock is wrong."}
                    ],
                    "MaxAnswerSelection": 3,
                    "CorrectAnswers": [1, 2, 4],
                    "CorrectAnswerExplanation": "Copilot requires a **valid license** and a stable **internet connection** to communicate with the service. Furthermore, while Copilot supports many languages, it won't function for languages that are **unsupported** by the model or the specific extension."
                },
                {
                    "id": 19,
                    "Question": "How can the insights gained from the metrics API be used to improve the development process in conjunction with GitHub Copilot? (Choose two)",
                    "Options": [
                        {"id": 1, "text": "A. Assigning personal coaching to users with the lowest acceptance rate."},
                        {"id": 2, "text": "B. Identifying users who have accepted the most suggestions."},
                        {"id": 3, "text": "C. Detailed analysis of GitHub Copilot suggestions vs manual coding."},
                        {"id": 4, "text": "D. Insights on the types of coding languages where GitHub Copilot is most helpful."}
                    ],
                    "MaxAnswerSelection": 2,
                    "CorrectAnswers": [3, 4],
                    "CorrectAnswerExplanation": "Metrics help evaluate *where* and *how* Copilot provides value. This includes a quantitative **comparison of AI-assisted vs. manual coding time** and identifying the **languages** where acceptance rates are highest, indicating maximum benefit."
                },
                {
                    "id": 20,
                    "Question": "How can users provide feedback about GitHub Copilot Chat using their IDE?",
                    "Options": [
                        {"id": 1, "text": "A. By typing a prompt starting with 'FEEDBACK:'"},
                        {"id": 2, "text": "B. Through the Share feedback button in the Copilot Chat panel."},
                        {"id": 3, "text": "C. By changing the IDE's theme to 'Copilot Feedback Mode'."},
                        {"id": 4, "text": "D. Feedback is only collected automatically, users cannot submit it manually."}
                    ],
                    "MaxAnswerSelection": 1,
                    "CorrectAnswers": [2],
                    "CorrectAnswerExplanation": "The standard and intended mechanism for manual feedback in the IDE is a dedicated interface element, typically a **'Share feedback' button** or similar icon, located within the Copilot Chat panel itself."
                },
                {
                    "id": 21,
                    "Question": "GitHub Copilot in the Command Line Interface (CLI) can be used to configure the following settings. (Choose two)",
                    "Options": [
                        {"id": 1, "text": "A. Usage analytics."},
                        {"id": 2, "text": "B. The AI model's temperature setting."},
                        {"id": 3, "text": "C. The default execution confirmation."},
                        {"id": 4, "text": "D. Code completion latency."}
                    ],
                    "MaxAnswerSelection": 2,
                    "CorrectAnswers": [1, 3],
                    "CorrectAnswerExplanation": "In the CLI, Copilot allows configuration of its operational behavior. This includes opting in or out of **usage analytics** and setting preferences for **execution confirmation** before a suggested command is run."
                },
                {
                    "id": 22,
                    "Question": "What types of content can GitHub Copilot Knowledge Base answer questions about? (Choose three)",
                    "Options": [
                        {"id": 1, "text": "A. User's email inbox."},
                        {"id": 2, "text": "B. Code snippets"},
                        {"id": 3, "text": "C. Design patterns"},
                        {"id": 4, "text": "D. Real-time news headlines."},
                        {"id": 5, "text": "E. Documentation."}
                    ],
                    "MaxAnswerSelection": 3,
                    "CorrectAnswers": [2, 3, 5],
                    "CorrectAnswerExplanation": "The Copilot Knowledge Base focuses on coding-related information. It can answer questions based on various development assets, including **code snippets**, general **design patterns**, and project-specific **documentation**."
                },
                {
                    "id": 23,
                    "Question": "If you are working on open-source projects, GitHub Copilot Individual can be paid.",
                    "Options": [
                        {"id": 1, "text": "A. True"},
                        {"id": 2, "text": "B. False"},
                        {"id": 3, "text": "C. N/A - The Individual plan is only for private repositories."},
                        {"id": 4, "text": "D. N/A - Copilot Pro is free for maintainers of popular open-source projects."}
                    ],
                    "MaxAnswerSelection": 1,
                    "CorrectAnswers": [4],
                    "CorrectAnswerExplanation": "While the Individual plan is typically paid, GitHub offers a free subscription to **Copilot Pro** (or the equivalent at the time) for verified and active **maintainers of popular open-source projects**, making the 'N/A' option with the correct clarification the most accurate answer."
                },
                {
                    "id": 24,
                    "Question": "What is the primary purpose of organization audit logs in GitHub Copilot Business?",
                    "Options": [
                        {"id": 1, "text": "A. To track how many lines of code each user writes."},
                        {"id": 2, "text": "B. To monitor the file system changes made by Copilot."},
                        {"id": 3, "text": "C. To record every code suggestion generated."},
                        {"id": 4, "text": "D. To monitor administrator activities and actions within the organization."}
                    ],
                    "MaxAnswerSelection": 1,
                    "CorrectAnswers": [4],
                    "CorrectAnswerExplanation": "Audit logs are a standard enterprise feature for compliance and security. Their main purpose is to track and record **administrator activities and policy changes**, not individual user coding behavior or generated suggestions."
                },
                {
                    "id": 25,
                    "Question": "What is a likely effect of GitHub Copilot being trained on commonly used code patterns?",
                    "Options": [
                        {"id": 1, "text": "A. It will only generate code for older, deprecated languages."},
                        {"id": 2, "text": "B. It will create entirely new, experimental code structures."},
                        {"id": 3, "text": "C. It will ignore all common best practices."},
                        {"id": 4, "text": "D. Suggest code snippets that reflect the most common practices in the training data."}
                    ],
                    "MaxAnswerSelection": 1,
                    "CorrectAnswers": [4],
                    "CorrectAnswerExplanation": "Since Copilot is trained on a massive codebase of public and common repositories, its suggestions naturally reflect the **most common practices and patterns** found in that training data, which often align with community-accepted standards."
                },
                {
                    "id": 26,
                    "Question": "How does GitHub Copilot typically handle code suggestions that involve deprecated features or syntax of programming languages?",
                    "Options": [
                        {"id": 1, "text": "A. It automatically replaces all deprecated features with modern equivalents."},
                        {"id": 2, "text": "B. GitHub Copilot may suggest deprecated syntax or features if they are present in its training data."},
                        {"id": 3, "text": "C. It refuses to generate code if it detects any deprecated syntax."},
                        {"id": 4, "text": "D. It flags the suggestion with a critical error warning."}
                    ],
                    "MaxAnswerSelection": 1,
                    "CorrectAnswers": [2],
                    "CorrectAnswerExplanation": "As a large language model, Copilot's suggestions are a reflection of its training data. If **deprecated syntax or features** were common in the code it was trained on, it may still suggest them, as it doesn't inherently understand modern best practices without explicit fine-tuning."
                },
                {
                    "id": 27,
                    "Question": "Identify the steps involved in the life cycle of a GitHub Copilot code suggestion. (Choose two)",
                    "Options": [
                        {"id": 1, "text": "A. Running a static code analysis tool on the entire repository."},
                        {"id": 2, "text": "B. Generate suggestions."},
                        {"id": 3, "text": "C. Fine-tuning the LLM based on the current suggestion."},
                        {"id": 4, "text": "D. Publishing the code to a remote repository."},
                        {"id": 5, "text": "E. Capturing the user's context."}
                    ],
                    "MaxAnswerSelection": 2,
                    "CorrectAnswers": [2, 5],
                    "CorrectAnswerExplanation": "The core loop involves first **capturing the user's context** (surrounding code, file names, etc.) to form a relevant prompt, and then submitting this to the LLM to **generate suggestions**."
                },
                {
                    "id": 28,
                    "Question": "What role does the pre-processing of user input play in the data flow of GitHub Copilot Chat?",
                    "Options": [
                        {"id": 1, "text": "A. It is only used to check for profanity."},
                        {"id": 2, "text": "B. It encrypts the prompt for transmission to the LLM."},
                        {"id": 3, "text": "C. It enriches the input prompt with additional context before passing it to the language model."},
                        {"id": 4, "text": "D. It converts the prompt into machine code."}
                    ],
                    "MaxAnswerSelection": 1,
                    "CorrectAnswers": [3],
                    "CorrectAnswerExplanation": "**Pre-processing** is critical for providing the LLM with all necessary information. It takes the user's raw prompt and **enriches it with context** from the IDE (like open files or selected code) to ensure the generated response is relevant."
                },
                {
                    "id": 29,
                    "Question": "What are the additional checks that need to pass before the GitHub Copilot responses are submitted to the user? (Choose two)",
                    "Options": [
                        {"id": 1, "text": "A. Code quality."},
                        {"id": 2, "text": "B. Verifying the code's copyright status."},
                        {"id": 3, "text": "C. Ensuring the code is a new file."},
                        {"id": 4, "text": "D. Suggestions matching public code (optional based on settings)."}
                    ],
                    "MaxAnswerSelection": 2,
                    "CorrectAnswers": [1, 4],
                    "CorrectAnswerExplanation": "Before delivery, suggestions undergo checks like **code quality** (though not a guarantee of perfection) and, based on user settings, a filter for **suggestions matching public code** to address potential security or license concerns."
                },
                {
                    "id": 30,
                    "Question": "What are the potential limitations of GitHub Copilot Chat? (Choose two)",
                    "Options": [
                        {"id": 1, "text": "A. Ability to handle complex code structures."},
                        {"id": 2, "text": "B. Limited training data."},
                        {"id": 3, "text": "C. Inability to generate any code at all."},
                        {"id": 4, "text": "D. It can only work in the web browser."}
                    ],
                    "MaxAnswerSelection": 2,
                    "CorrectAnswers": [1, 2],
                    "CorrectAnswerExplanation": "While Copilot is powerful, its limitations include challenges with highly **complex or non-standard code structures** and the fact that its knowledge is constrained by the sometimes **limited or imperfect nature of its training data**."
                },
                {
                    "id": 31,
                    "Question": "What is the impact of the **\"Fill in the Middle\" (FIM)** technique on GitHub Copilot's code suggestions?",
                    "Options": [
                        {"id": 1, "text": "A. Improves suggestions by considering both the prefix and suffix of the code, filling in the middle part more accurately."},
                        {"id": 2, "text": "B. It makes the model only generate code at the beginning of a file."},
                        {"id": 3, "text": "C. It forces the model to ignore any context from the surrounding code."},
                        {"id": 4, "text": "D. It only works for HTML and CSS."}
                    ],
                    "MaxAnswerSelection": 1,
                    "CorrectAnswers": [1],
                    "CorrectAnswerExplanation": "**Fill in the Middle (FIM)** is an advanced technique that allows the model to leverage context from the code *before* (prefix) and *after* (suffix) the cursor, resulting in much more accurate and contextual suggestions for completing code blocks or filling in functions."
                },
                {
                    "id": 32,
                    "Question": "Which of the following statements correctly describes how GitHub Copilot Individual users' prompt data is used? (Choose two)",
                    "Options": [
                        {"id": 1, "text": "A. Real-time user input helps generate context-aware code suggestions."},
                        {"id": 2, "text": "B. Prompt data is sold to third-party advertisers."},
                        {"id": 3, "text": "C. Prompt data is used to train machine learning models for better code suggestions."},
                        {"id": 4, "text": "D. Prompt data is discarded immediately after the session."}
                    ],
                    "MaxAnswerSelection": 2,
                    "CorrectAnswers": [1, 3],
                    "CorrectAnswerExplanation": "For Individual users (unless explicitly opted out), prompt data is used in two ways: it's used in **real-time to generate context-aware suggestions**, and it may be **aggregated and used to train** the underlying large language model for general improvement."
                },
                {
                    "id": 33,
                    "Question": "What is used by GitHub Copilot in the IDE to determine the prompt context?",
                    "Options": [
                        {"id": 1, "text": "A. Information from the IDE like open tabs, cursor location, selected code."},
                        {"id": 2, "text": "B. The user's browser history."},
                        {"id": 3, "text": "C. Only the single line of code immediately preceding the cursor."},
                        {"id": 4, "text": "D. The current desktop wallpaper."}
                    ],
                    "MaxAnswerSelection": 1,
                    "CorrectAnswers": [1],
                    "CorrectAnswerExplanation": "To provide highly relevant suggestions, Copilot needs to understand the user's immediate work environment, which is gathered from the IDE, including **open files, the current cursor position, and any code that has been selected**."
                },
                {
                    "id": 34,
                    "Question": "Which of the following does GitHub Copilot's LLM derive context from when producing a response?",
                    "Options": [
                        {"id": 1, "text": "A. The current CPU temperature of the user's computer."},
                        {"id": 2, "text": "B. The name of the user's operating system."},
                        {"id": 3, "text": "C. The user's recent GitHub activity on unrelated projects."},
                        {"id": 4, "text": "D. Neighboring or related files within a project."}
                    ],
                    "MaxAnswerSelection": 1,
                    "CorrectAnswers": [4],
                    "CorrectAnswerExplanation": "In addition to the current file, Copilot significantly improves its context by examining **neighboring or related files** in the project. This allows it to understand APIs, dependencies, and overall project structure."
                },
                {
                    "id": 35,
                    "Question": "What is a benefit of using custom models in GitHub Copilot?",
                    "Options": [
                        {"id": 1, "text": "A. They allow the use of any AI model from the public internet."},
                        {"id": 2, "text": "B. They eliminate all bugs in the generated code."},
                        {"id": 3, "text": "C. They enforce the use of a single programming language."},
                        {"id": 4, "text": "D. Responses use practices and patterns in your repositories."}
                    ],
                    "MaxAnswerSelection": 1,
                    "CorrectAnswers": [4],
                    "CorrectAnswerExplanation": "The main benefit of a custom model (available in Copilot Enterprise) is that it's tuned on an organization's internal code, ensuring that the generated **responses adhere to the company's specific coding practices, patterns, and internal libraries**."
                },
                {
                    "id": 36,
                    "Question": "How does GitHub Copilot identify matching code and ensure that public code is appropriately handled or blocked? (Choose two)",
                    "Options": [
                        {"id": 1, "text": "A. Implementing safeguards to detect and avoid suggesting verbatim snippets from public code."},
                        {"id": 2, "text": "B. Filtering out suggestions that match code from public repositories."},
                        {"id": 3, "text": "C. Manually comparing every suggestion to the entire public GitHub repository database."},
                        {"id": 4, "text": "D. Requiring users to license all generated code under MIT."}
                    ],
                    "MaxAnswerSelection": 2,
                    "CorrectAnswers": [1, 2],
                    "CorrectAnswerExplanation": "GitHub Copilot has a built-in feature to check for literal matches against public code. It uses **safeguards to detect verbatim snippets** and **filters out suggestions** that meet a certain threshold of similarity to public code, depending on the user's settings."
                },
                {
                    "id": 37,
                    "Question": "How does GitHub Copilot utilize chat history to enhance its code completion capabilities?",
                    "Options": [
                        {"id": 1, "text": "A. It uses chat history to determine the user's favorite color."},
                        {"id": 2, "text": "B. It ignores chat history entirely, focusing only on the current file."},
                        {"id": 3, "text": "C. By forcing the user to use the same programming language as in previous chats."},
                        {"id": 4, "text": "D. By using chat history to offer personalized code snippets based on previous prompts."}
                    ],
                    "MaxAnswerSelection": 1,
                    "CorrectAnswers": [4],
                    "CorrectAnswerExplanation": "Copilot Chat is designed to maintain conversational state. It leverages **chat history** to understand the user's ongoing goals, context, and preferred approach, allowing it to provide more **personalized and relevant code snippets**."
                },
                {
                    "id": 38,
                    "Question": "What is the main purpose of the duplication detection filter in GitHub Copilot?",
                    "Options": [
                        {"id": 1, "text": "A. To eliminate all redundant code in the user's repository."},
                        {"id": 2, "text": "B. To make sure all generated code is fully unique."},
                        {"id": 3, "text": "C. To prevent the suggestion of code that is too simple."},
                        {"id": 4, "text": "D. To detect and block suggestions that match public code snippets on GitHub if they contain about 150 characters."}
                    ],
                    "MaxAnswerSelection": 1,
                    "CorrectAnswers": [4],
                    "CorrectAnswerExplanation": "The duplication detection filter's explicit purpose is to identify and optionally block suggestions that **literally match public code snippets** above a certain length (e.g., ~150 characters) to help users avoid potential licensing or attribution issues."
                },
                {
                    "id": 39,
                    "Question": "When crafting prompts for GitHub Copilot, what is a recommended strategy to enhance the relevance of the generated code?",
                    "Options": [
                        {"id": 1, "text": "A. Keep the prompt as vague as possible to allow the AI maximum flexibility."},
                        {"id": 2, "text": "B. Provide examples of expected input and output within the prompt."},
                        {"id": 3, "text": "C. Use only a single keyword in the prompt."},
                        {"id": 4, "text": "D. Ask the AI to write a short story before the code block."}
                    ],
                    "MaxAnswerSelection": 1,
                    "CorrectAnswers": [2],
                    "CorrectAnswerExplanation": "A highly effective prompting technique is **few-shot prompting**, where you **provide examples of the desired input and output**. This gives the model a clear and precise pattern to follow, significantly increasing the relevance of the generated code."
                },
                {
                    "id": 40,
                    "Question": "What is zero-shot prompting?",
                    "Options": [
                        {"id": 1, "text": "A. Giving Copilot one example of the desired output before asking a question."},
                        {"id": 2, "text": "B. Only giving GitHub Copilot a question as a prompt and no examples."},
                        {"id": 3, "text": "C. Asking a question and immediately providing the answer."},
                        {"id": 4, "text": "D. Providing a hundred examples of desired output."}
                    ],
                    "MaxAnswerSelection": 1,
                    "CorrectAnswers": [2],
                    "CorrectAnswerExplanation": "**Zero-shot prompting** is the simplest form of prompting, where you ask the AI to complete a task **without providing any examples** of the desired output in the prompt itself. It relies solely on the model's pre-trained knowledge."
                }
            ]
        };

        // Global variables for quiz state
        let quizData = null;
        let currentQuestionIndex = 0;
        // userAnswers will now store an array of selected option IDs for each question.
        // E.g., userAnswers[0] = [2, 3] if the user selected options 2 and 3 for the first question.
        let userAnswers = [];
        let isShowingCorrect = false;

        // Configuration
        const QUIZ_CONTAINER = document.getElementById('quiz-container');
        const RESULTS_CONTAINER = document.getElementById('results-container');
        const LOADING_ELEMENT = document.getElementById('loading');
        const EXPLANATION_BOX = document.getElementById('explanation-box');
        const EXPLANATION_TEXT = document.getElementById('explanation-text');

        /**
         * Initializes the application using the embedded quiz data.
         */
        function initializeQuiz() {
            try {
                // Assign data directly
                quizData = RAW_QUIZ_DATA;
                
                // Initialize user answers array with empty arrays for multi-select support
                userAnswers = new Array(quizData.questions.length).fill(0).map(() => []);
                
                // Set the quiz title
                document.getElementById('quiz-title').textContent = quizData.quizName;
                
                // Update the static score information (Note: Points are per-question now, 
                // but the overall score is what matters for the header)
                document.getElementById('score-info').textContent = `Total Score: ${quizData.totalScore} | Passing Score: ${quizData.passingScore}`;

                // Hide loading, show quiz
                LOADING_ELEMENT.classList.add('hidden');
                QUIZ_CONTAINER.classList.remove('hidden');
                
                // Render the first question
                renderQuestion(currentQuestionIndex);

            } catch (error) {
                console.error("Quiz initialization failed:", error);
                // Fallback display for critical initialization errors
                LOADING_ELEMENT.textContent = `Error: Could not process quiz data. ${error.message}`;
                LOADING_ELEMENT.classList.add('text-red-600', 'font-bold', 'p-4', 'bg-red-100', 'rounded-lg');
            }
        }

        /**
         * Renders the question and its options in the UI.
         * @param {number} index - The index of the question to render.
         */
        function renderQuestion(index) {
            if (!quizData || !quizData.questions[index]) return;

            const question = quizData.questions[index];
            const totalQuestions = quizData.questions.length;
            const optionsContainer = document.getElementById('options-container');

            // Reset correct answer visibility state
            isShowingCorrect = false;
            document.getElementById('show-correct-btn').textContent = 'Show Correct Answer';
            EXPLANATION_BOX.classList.add('hidden');

            // Update question text and counter
            document.getElementById('question-text').textContent = `Q${question.id}. (${question.MaxAnswerSelection > 1 ? 'Multiple Answer' : 'Single Answer'}) ${question.Question}`;
            document.getElementById('question-counter').textContent = `Question ${index + 1} of ${totalQuestions}`;
            document.getElementById('selection-hint').textContent = question.MaxAnswerSelection > 1 
                ? `Choose up to ${question.MaxAnswerSelection} options.`
                : `Choose 1 option.`;


            // Update navigation buttons
            document.getElementById('prev-btn').disabled = index === 0;
            
            const nextBtn = document.getElementById('next-btn');
            if (index === totalQuestions - 1) {
                nextBtn.textContent = 'Submit Quiz';
                nextBtn.classList.remove('bg-blue-600', 'hover:bg-blue-700');
                nextBtn.classList.add('bg-green-600', 'hover:bg-green-700');
            } else {
                nextBtn.textContent = 'Next';
                nextBtn.classList.remove('bg-green-600', 'hover:bg-green-700');
                nextBtn.classList.add('bg-blue-600', 'hover:bg-blue-700');
            }

            // Render options
            optionsContainer.innerHTML = '';
            question.Options.forEach(option => {
                const isSelected = userAnswers[index].includes(option.id);

                const button = document.createElement('button');
                button.type = 'button';
                // Use a standard style by default
                button.className = `option-button w-full p-4 rounded-lg border border-gray-200 shadow-sm transition-colors ${isSelected ? 'selected' : 'bg-white'}`;
                button.innerHTML = `<span class="font-bold mr-3 text-gray-600">${option.text.split('.')[0]}.</span> ${option.text.split('.').slice(1).join('.')}`;
                button.onclick = () => handleOptionSelect(index, option.id, question.MaxAnswerSelection);

                optionsContainer.appendChild(button);
            });
        }

        /**
         * Toggles the visibility of the correct answer and explanation for the current question.
         */
        function toggleCorrectAnswer() {
            const index = currentQuestionIndex;
            if (!quizData || !quizData.questions[index]) return;

            isShowingCorrect = !isShowingCorrect;
            const question = quizData.questions[index];
            const optionsContainer = document.getElementById('options-container');
            const options = optionsContainer.children;
            const correctIds = question.CorrectAnswers;
            const userSelectedIds = userAnswers[index];
            
            const btn = document.getElementById('show-correct-btn');
            btn.textContent = isShowingCorrect ? 'Hide Correct Answer' : 'Show Correct Answer';
            EXPLANATION_TEXT.innerHTML = question.CorrectAnswerExplanation;
            
            if (isShowingCorrect) {
                EXPLANATION_BOX.classList.remove('hidden');
            } else {
                EXPLANATION_BOX.classList.add('hidden');
            }

            // Re-render options to apply/remove classes
            Array.from(options).forEach((option, optionIndex) => {
                // Since Options ID starts at 1, optionIndex is 0-based, so use optionIndex + 1 for ID
                const optionId = optionIndex + 1; 
                const isSelectedByUser = userSelectedIds.includes(optionId);
                const isCorrect = correctIds.includes(optionId);

                option.classList.remove('correct', 'incorrect', 'selected');
                
                if (isShowingCorrect) {
                    if (isCorrect) {
                        // Mark the correct answer
                        option.classList.add('correct');
                    }
                    if (isSelectedByUser && !isCorrect) {
                        // Mark the incorrect selection by the user
                        option.classList.add('incorrect');
                    } else if (isSelectedByUser && isCorrect) {
                        // If selected and correct, the 'correct' class takes precedence
                        option.classList.add('correct');
                    }
                } else if (isSelectedByUser) {
                    // If hiding correct answer, just show the user's selection
                    option.classList.add('selected');
                }
            });
        }


        /**
         * Stores the user's selected option(s) and re-renders the current question.
         * Handles single- and multi-select logic.
         * @param {number} questionIndex - The index of the question.
         * @param {number} selectedId - The ID of the selected option (1-based).
         * @param {number} maxSelection - The maximum number of options allowed.
         */
        function handleOptionSelect(questionIndex, selectedId, maxSelection) {
            let currentSelections = userAnswers[questionIndex];

            if (maxSelection > 1) {
                // Multi-select logic: Toggle the selection
                const indexInSelections = currentSelections.indexOf(selectedId);
                
                if (indexInSelections > -1) {
                    // Deselect
                    currentSelections.splice(indexInSelections, 1);
                } else if (currentSelections.length < maxSelection) {
                    // Select (if max not reached)
                    currentSelections.push(selectedId);
                }
                userAnswers[questionIndex] = currentSelections;
            } else {
                // Single-select logic: Replace the selection, or deselect if clicked again
                if (currentSelections.includes(selectedId)) {
                    // Deselect if already selected
                    userAnswers[questionIndex] = [];
                } else {
                    // Select the new option
                    userAnswers[questionIndex] = [selectedId];
                }
            }
            
            // Re-render to show selection visually
            renderQuestion(questionIndex);
        }

        /**
         * Handles navigation between questions (Next/Previous).
         * @param {number} direction - 1 for next, -1 for previous.
         */
        function handleNavigation(direction) {
            const newIndex = currentQuestionIndex + direction;

            if (newIndex >= 0 && newIndex < quizData.questions.length) {
                currentQuestionIndex = newIndex;
                renderQuestion(currentQuestionIndex);
            } else if (direction === 1 && newIndex === quizData.questions.length) {
                submitQuiz();
            }
        }

        /**
         * Calculates the final score and displays the results.
         * Scoring logic: The question is marked correct ONLY if the user's selected IDs
         * exactly match the set of CorrectAnswer IDs. Partial credit is NOT given.
         */
        function submitQuiz() {
            let finalScore = 0;
            const totalScore = quizData.totalScore;
            const passingScore = quizData.passingScore;
            
            // To calculate score, we assume each correct question is worth a fixed amount
            // that sums up to the totalScore.
            const pointsPerQuestion = totalScore / quizData.questions.length;


            quizData.questions.forEach((question, index) => {
                const userSelection = userAnswers[index].sort();
                const correctAnswers = question.CorrectAnswers.sort();

                // Check if user's selection exactly matches the correct answers set
                const isCorrect = userSelection.length === correctAnswers.length &&
                                  userSelection.every((value, i) => value === correctAnswers[i]);

                if (isCorrect) {
                    // Since all questions are worth 200 points in the JSON, let's just 
                    // use a simplified total score calculation based on the number of questions.
                    // If the original data intended points per question, we'd use that, but
                    // since there's no points field, we divide the total score equally.
                    finalScore += pointsPerQuestion;
                }
            });

            // Update results card. Score is rounded to handle floating point issues from division.
            document.getElementById('final-score').textContent = Math.round(finalScore);
            document.getElementById('results-total-score').textContent = totalScore;
            const statusElement = document.getElementById('pass-fail-status');

            if (finalScore >= passingScore) {
                statusElement.textContent = 'PASSED';
                statusElement.classList.remove('bg-red-200', 'text-red-700');
                statusElement.classList.add('bg-green-200', 'text-green-700');
            } else {
                statusElement.textContent = 'FAILED';
                statusElement.classList.remove('bg-green-200', 'text-green-700');
                statusElement.classList.add('bg-red-200', 'text-red-700');
            }

            // Hide quiz, show results
            QUIZ_CONTAINER.classList.add('hidden');
            RESULTS_CONTAINER.classList.remove('hidden');
        }

        /**
         * Generates the summary content and displays the summary modal.
         * @param {boolean} showModal - If true, shows the modal; otherwise, only generates content.
         */
        function renderAndShowSummary(showModal) {
            const summaryContainer = document.getElementById('printSummary');
            
            // Get final score (must be called after submitQuiz or it might be 0)
            const finalScore = document.getElementById('final-score').textContent;
            
            let summaryHtml = `<h1 class="text-3xl font-bold text-gray-900 mb-6">${quizData.quizName} Review & Summary</h1>`;
            
            summaryHtml += `<div class="mb-8 p-4 border rounded-lg bg-gray-50">
                                <p class="text-lg font-semibold">Total Questions: ${quizData.questions.length}</p>
                                <p class="text-lg font-semibold">Maximum Score: ${quizData.totalScore}</p>
                                <p class="text-lg font-semibold">Passing Score: ${quizData.passingScore}</p>
                                <p class="text-xl font-bold mt-2">Your Score: ${finalScore} / ${quizData.totalScore} (${document.getElementById('pass-fail-status').textContent})</p>
                            </div>`;

            quizData.questions.forEach((question, index) => {
                const userSelectedIds = userAnswers[index];
                const correctIds = question.CorrectAnswers;
                
                // Determine correctness for score calculation logic
                const isCorrect = userSelectedIds.length === correctIds.length &&
                                  userSelectedIds.sort().every((value, i) => value === correctIds.sort()[i]);

                const statusColor = isCorrect ? 'text-green-600' : 'text-red-600';
                const statusIcon = isCorrect ? '✅' : '❌';

                // Format User Answer Text
                let userAnswerTexts = userSelectedIds.map(id => {
                    const option = question.Options.find(opt => opt.id === id);
                    if (!option) return 'N/A';
                    
                    const isUserCorrect = correctIds.includes(id);
                    const colorClass = isUserCorrect ? 'text-green-700' : 'text-red-700';
                    const icon = isUserCorrect ? '✔' : '✘';
                    return `<span class="${colorClass}">${icon} ${option.text}</span>`;
                });

                if (userAnswerTexts.length === 0) {
                     userAnswerTexts = ['<span class="text-gray-500 italic">No Answer Selected</span>'];
                }
                
                // Format Correct Answer Text
                const correctAnswerTexts = correctIds.map(id => {
                    const option = question.Options.find(opt => opt.id === id);
                    return `<span class="text-green-700">✔ ${option.text}</span>`;
                });


                summaryHtml += `
                    <div class="mb-6 p-4 border rounded-lg shadow-sm ${isCorrect ? 'border-green-300 bg-green-50' : 'border-red-300 bg-red-50'}">
                        <h3 class="text-xl font-semibold text-gray-800 mb-2">${statusIcon} Q${question.id}: ${question.Question} 
                            <span class="text-sm font-normal text-gray-500">(${question.MaxAnswerSelection > 1 ? 'Multi-Select' : 'Single-Select'})</span>
                        </h3>
                        
                        <div class="mt-4 border-t pt-3">
                            <p class="text-md font-medium text-gray-700">Your Selection${userAnswerTexts.length > 1 ? 's' : ''}:</p>
                            <ul class="list-none space-y-1 pl-0">
                                ${userAnswerTexts.map(text => `<li>${text}</li>`).join('')}
                            </ul>
                        </div>

                        <div class="mt-4 border-t pt-3">
                            <p class="text-md font-medium text-gray-700">Correct Answer${correctAnswerTexts.length > 1 ? 's' : ''}:</p>
                            <ul class="list-none space-y-1 pl-0">
                                ${correctAnswerTexts.map(text => `<li>${text}</li>`).join('')}
                            </ul>
                        </div>
                        
                        <!-- Correct Answer Explanation -->
                        <div class="explanation mt-4 p-3 rounded-lg text-gray-800 text-sm">
                            <p class="font-bold text-orange-700 mb-1">Explanation:</p>
                            <p>${question.CorrectAnswerExplanation}</p>
                        </div>
                    </div>
                `;
            });

            summaryContainer.innerHTML = summaryHtml;

            if (showModal) {
                document.getElementById('summary-modal').classList.remove('hidden');
            }
        }

        // Initialize the quiz when the page loads
        document.addEventListener('DOMContentLoaded', initializeQuiz);
    </script>
</body>
</html>